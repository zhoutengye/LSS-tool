# LSS æµ‹è¯•æ–‡ä»¶çŠ¶æ€æŠ¥å‘Š

## æµ‹è¯•æ–‡ä»¶ä½ç½®

æ‰€æœ‰æµ‹è¯•æ–‡ä»¶å·²ç§»è‡³ï¼š`backend/tests/`

```
backend/tests/
â”œâ”€â”€ test_toolbox.py      # æµ‹è¯•å·¥å…·ç®±æ¶æ„
â”œâ”€â”€ test_orchestrator.py # æµ‹è¯•æ™ºèƒ½ç¼–æ’å™¨
â”œâ”€â”€ test_commander.py    # æµ‹è¯•æ™ºèƒ½æŒ‡æŒ¥å®˜
â”œâ”€â”€ test_new_arch.py     # æµ‹è¯•æ–°æ¶æ„
â””â”€â”€ run_all_tests.py     # ç»Ÿä¸€è¿è¡Œè„šæœ¬
```

## æµ‹è¯•æ–‡ä»¶è¯´æ˜

### 1. test_toolbox.py - å·¥å…·ç®±æµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- å·¥å…·æ³¨å†Œä¸­å¿ƒ (registry)
- BaseTool æ¥å£
- SPC å·¥å…·åŠŸèƒ½
- ç»Ÿä¸€è°ƒç”¨æ¥å£

**ä¾èµ–**: `database`, `ingestion`, `core.registry`, `models`

**çŠ¶æ€**: âš ï¸ éœ€è¦æ•°æ®åº“

### 2. test_orchestrator.py - ç¼–æ’å™¨æµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- BlackBeltCommander å¤šç»´åº¦åˆ†æ
- æŒ‰æ‰¹æ¬¡/å·¥åº/æ—¶é—´/äººå‘˜/è½¦é—´åˆ†æ
- æŠ¥å‘Šç”Ÿæˆ

**ä¾èµ–**: `database`, `analysis.orchestrator`, `models`

**çŠ¶æ€**: âš ï¸ éœ€è¦æ•°æ®åº“

### 3. test_commander.py - æŒ‡æŒ¥å®˜æµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- IntelligentCommander æŒ‡ä»¤ç”Ÿæˆ
- åˆ†æ â†’ å¯¹ç­–åŒ¹é… â†’ æŒ‡ä»¤æ¨é€
- è§’è‰²åˆ†ç»„ (Operator/QA/TeamLeader/Manager)

**ä¾èµ–**: `database`, `analysis.commander`, `models`

**çŠ¶æ€**: âš ï¸ éœ€è¦æ•°æ®åº“

### 4. test_new_arch.py - æ–°æ¶æ„æµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- åˆ†å±‚æ¶æ„éªŒè¯
- DataProvider ç»Ÿä¸€æ¥å£
- DataContext ç»“æ„

**ä¾èµ–**: `database`, `data.providers`, `models`

**çŠ¶æ€**: âš ï¸ éœ€è¦æ•°æ®åº“

## è¿è¡Œæµ‹è¯•

### å•ç‹¬è¿è¡ŒæŸä¸ªæµ‹è¯•

```bash
cd backend
python tests/test_commander.py
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
cd backend
python tests/run_all_tests.py
```

## å·²çŸ¥é—®é¢˜

### 1. å¯¼å…¥è·¯å¾„é—®é¢˜
**é—®é¢˜**: æµ‹è¯•æ–‡ä»¶ä» `backend/` ç§»è‡³ `backend/tests/` åï¼Œéœ€è¦è°ƒæ•´å¯¼å…¥è·¯å¾„

**è§£å†³æ–¹æ¡ˆ**: æ¯ä¸ªæµ‹è¯•æ–‡ä»¶éœ€è¦æ·»åŠ ï¼š
```python
import sys
sys.path.insert(0, "..")
```

### 2. æ•°æ®åº“ä¾èµ–
**é—®é¢˜**: æ‰€æœ‰æµ‹è¯•éƒ½éœ€è¦æ•°æ®åº“è¿æ¥

**å‰ç½®æ¡ä»¶**:
```bash
cd backend
python seed.py  # åˆå§‹åŒ–æ•°æ®åº“
```

### 3. æ¨¡å—å¯¼å…¥é¡ºåº
æŸäº›æµ‹è¯•éœ€è¦ç‰¹å®šçš„æ¨¡å—å¯¼å…¥é¡ºåºï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥è°ƒæ•´

## æµ‹è¯•å»ºè®®

### çŸ­æœŸä¿®å¤

1. **ä¿®å¤å¯¼å…¥è·¯å¾„**: ä¸ºæ‰€æœ‰æµ‹è¯•æ–‡ä»¶æ·»åŠ  `sys.path` è®¾ç½®
2. **åˆ›å»ºæµ‹è¯•æ•°æ®åº“**: ä½¿ç”¨å†…å­˜æ•°æ®åº“æˆ–æµ‹è¯•ä¸“ç”¨æ•°æ®åº“
3. **æ·»åŠ  pytest æ”¯æŒ**: ä½¿ç”¨ pytest æ¡†æ¶ç®¡ç†æµ‹è¯•

### é•¿æœŸè§„åˆ’

1. **å•å…ƒæµ‹è¯•**: ä¸ºæ¯ä¸ªæ¨¡å—ç¼–å†™ç‹¬ç«‹çš„å•å…ƒæµ‹è¯•
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹
3. **Mock æ•°æ®**: ä½¿ç”¨ mock æ•°æ®å‡å°‘å¯¹æ•°æ®åº“çš„ä¾èµ–
4. **CI/CD**: é›†æˆåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹

## æ¨èç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py              # pytest é…ç½®
â”‚   â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_registry.py
â”‚   â”‚   â”œâ”€â”€ test_providers.py
â”‚   â”‚   â””â”€â”€ test_tools.py
â”‚   â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_orchestrator.py
â”‚   â”‚   â”œâ”€â”€ test_commander.py
â”‚   â”‚   â””â”€â”€ test_workflows.py
â”‚   â”œâ”€â”€ fixtures/                # æµ‹è¯•æ•°æ®
â”‚   â”‚   â”œâ”€â”€ test_data.csv
â”‚   â”‚   â””â”€â”€ test_db.py
â”‚   â””â”€â”€ run_all_tests.py         # ä¸´æ—¶è„šæœ¬
```

## æ€»ç»“

- âœ… æµ‹è¯•æ–‡ä»¶å·²ç»Ÿä¸€åˆ° `backend/tests/` ç›®å½•
- âš ï¸ éœ€è¦ä¿®å¤å¯¼å…¥è·¯å¾„å’Œæ•°æ®åº“ä¾èµ–
- ğŸ“‹ å»ºè®®ä½¿ç”¨ pytest é‡æ„æµ‹è¯•æ¡†æ¶
- ğŸ¯ ç›®æ ‡ï¼šå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
